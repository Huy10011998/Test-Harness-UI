{"ast":null,"code":"import { v4 as uuidv4 } from \"uuid\";\nimport axios from \"axios\";\nimport { setLoading } from \"../redux/loading\";\nimport store from \"../redux/store\";\nexport const loadingHandler = () => {\n  const addRequestId = config => {\n    const requestId = uuidv4();\n    config.requestIds = config.requestIds || [];\n    config.requestIds.push(requestId);\n    //store.dispatch(setLoading(requestId));\n    return config;\n  };\n  const deleteRequestId = res => {\n    if (res.config.requestIds) {\n      //store.dispatch(setLoading(\"\"));\n    }\n    res.config.requestIds = [];\n  };\n  const deleteRequestIdsOnSuccess = res => {\n    deleteRequestId(res);\n    return res;\n  };\n  const deleteRequestIdsOnFailure = res => {\n    deleteRequestId(res);\n    return Promise.reject(res);\n  };\n  return {\n    addRequestId,\n    deleteRequestIdsOnSuccess,\n    deleteRequestIdsOnFailure\n  };\n};\nconst axiosInstance = axios.create({\n  baseURL: \"\",\n  timeout: 60000,\n  headers: {\n    Accept: \"application/json\"\n  }\n});\naxiosInstance.interceptors.request.use(loadingHandler().addRequestId, undefined);\naxiosInstance.defaults.headers.post[\"Access-Control-Allow-Origin\"] = \"*\";\naxiosInstance.defaults.headers.post[\"Access-Control-Allow-Methods\"] = \"*\";\naxiosInstance.defaults.headers.post[\"Access-Control-Allow-Headers\"] = \"*\";\naxiosInstance.interceptors.response.use(loadingHandler().deleteRequestIdsOnSuccess, loadingHandler().deleteRequestIdsOnFailure);\nexport default axiosInstance;","map":{"version":3,"names":["v4","uuidv4","axios","setLoading","store","loadingHandler","addRequestId","config","requestId","requestIds","push","deleteRequestId","res","deleteRequestIdsOnSuccess","deleteRequestIdsOnFailure","Promise","reject","axiosInstance","create","baseURL","timeout","headers","Accept","interceptors","request","use","undefined","defaults","post","response"],"sources":["/Users/quochuy/Downloads/Project-Demo/Test-harness-ui/src/common/axios.js"],"sourcesContent":["import { v4 as uuidv4 } from \"uuid\";\nimport axios from \"axios\";\nimport { setLoading } from \"../redux/loading\";\nimport store from \"../redux/store\";\n\nexport const loadingHandler = () => {\n  const addRequestId = (config) => {\n    const requestId = uuidv4();\n    config.requestIds = config.requestIds || [];\n    config.requestIds.push(requestId);\n    //store.dispatch(setLoading(requestId));\n    return config;\n  };\n\n  const deleteRequestId = (res) => {\n    if (res.config.requestIds) {\n      //store.dispatch(setLoading(\"\"));\n    }\n    res.config.requestIds = [];\n  };\n\n  const deleteRequestIdsOnSuccess = (res) => {\n    deleteRequestId(res);\n    return res;\n  };\n\n  const deleteRequestIdsOnFailure = (res) => {\n    deleteRequestId(res);\n    return Promise.reject(res);\n  };\n\n  return { addRequestId, deleteRequestIdsOnSuccess, deleteRequestIdsOnFailure };\n};\n\nconst axiosInstance = axios.create({\n  baseURL: \"\",\n  timeout: 60000,\n  headers: {\n    Accept: \"application/json\",\n  },\n});\n\naxiosInstance.interceptors.request.use(\n  loadingHandler().addRequestId,\n  undefined\n);\n\naxiosInstance.defaults.headers.post[\"Access-Control-Allow-Origin\"] = \"*\";\naxiosInstance.defaults.headers.post[\"Access-Control-Allow-Methods\"] = \"*\";\naxiosInstance.defaults.headers.post[\"Access-Control-Allow-Headers\"] = \"*\";\n\naxiosInstance.interceptors.response.use(\n  loadingHandler().deleteRequestIdsOnSuccess,\n  loadingHandler().deleteRequestIdsOnFailure\n);\n\nexport default axiosInstance;\n"],"mappings":"AAAA,SAASA,EAAE,IAAIC,MAAM,QAAQ,MAAM;AACnC,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,UAAU,QAAQ,kBAAkB;AAC7C,OAAOC,KAAK,MAAM,gBAAgB;AAElC,OAAO,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAClC,MAAMC,YAAY,GAAIC,MAAM,IAAK;IAC/B,MAAMC,SAAS,GAAGP,MAAM,CAAC,CAAC;IAC1BM,MAAM,CAACE,UAAU,GAAGF,MAAM,CAACE,UAAU,IAAI,EAAE;IAC3CF,MAAM,CAACE,UAAU,CAACC,IAAI,CAACF,SAAS,CAAC;IACjC;IACA,OAAOD,MAAM;EACf,CAAC;EAED,MAAMI,eAAe,GAAIC,GAAG,IAAK;IAC/B,IAAIA,GAAG,CAACL,MAAM,CAACE,UAAU,EAAE;MACzB;IAAA;IAEFG,GAAG,CAACL,MAAM,CAACE,UAAU,GAAG,EAAE;EAC5B,CAAC;EAED,MAAMI,yBAAyB,GAAID,GAAG,IAAK;IACzCD,eAAe,CAACC,GAAG,CAAC;IACpB,OAAOA,GAAG;EACZ,CAAC;EAED,MAAME,yBAAyB,GAAIF,GAAG,IAAK;IACzCD,eAAe,CAACC,GAAG,CAAC;IACpB,OAAOG,OAAO,CAACC,MAAM,CAACJ,GAAG,CAAC;EAC5B,CAAC;EAED,OAAO;IAAEN,YAAY;IAAEO,yBAAyB;IAAEC;EAA0B,CAAC;AAC/E,CAAC;AAED,MAAMG,aAAa,GAAGf,KAAK,CAACgB,MAAM,CAAC;EACjCC,OAAO,EAAE,EAAE;EACXC,OAAO,EAAE,KAAK;EACdC,OAAO,EAAE;IACPC,MAAM,EAAE;EACV;AACF,CAAC,CAAC;AAEFL,aAAa,CAACM,YAAY,CAACC,OAAO,CAACC,GAAG,CACpCpB,cAAc,CAAC,CAAC,CAACC,YAAY,EAC7BoB,SACF,CAAC;AAEDT,aAAa,CAACU,QAAQ,CAACN,OAAO,CAACO,IAAI,CAAC,6BAA6B,CAAC,GAAG,GAAG;AACxEX,aAAa,CAACU,QAAQ,CAACN,OAAO,CAACO,IAAI,CAAC,8BAA8B,CAAC,GAAG,GAAG;AACzEX,aAAa,CAACU,QAAQ,CAACN,OAAO,CAACO,IAAI,CAAC,8BAA8B,CAAC,GAAG,GAAG;AAEzEX,aAAa,CAACM,YAAY,CAACM,QAAQ,CAACJ,GAAG,CACrCpB,cAAc,CAAC,CAAC,CAACQ,yBAAyB,EAC1CR,cAAc,CAAC,CAAC,CAACS,yBACnB,CAAC;AAED,eAAeG,aAAa"},"metadata":{},"sourceType":"module"}